function nt_init_listeners(){for(var e=document.querySelectorAll(".nt-select-all"),t=0;t<e.length;t++)e[t].addEventListener("click",nt_select_all_click);document.querySelector(".nt-export-post-type").addEventListener("change",nt_export_options_change),document.querySelector(".nt-export-post-status").addEventListener("change",nt_export_options_change)}function nt_select_all_click(e){for(var t=e.target,n=document.getElementsByClassName("nt-cb"),o=0;o<n.length;o++){var r=n[o];t!==r&&t.checked!==r.checked&&(r.checked=t.checked)}}function nt_export_options_change(e){var t=document.querySelector(".nt-export-post-type"),n=document.querySelector(".nt-export-post-status");jQuery.ajax({url:_nt_export.ajax_url,type:"POST",data:{action:"nt_export_page",_ajax_nonce:_nt_export.nonce,post_type:t.value,post_status:n.value},success:function(e){var t=document.querySelector(".alert-danger");if(0!==parseInt(e)){document.querySelector(".table").remove();var n=document.querySelector(".nt-export-options"),o=document.createElement("table");o.classList.add("table");var r=/^(\t+|<table class=".*">|<\/table>)/gm;o.innerHTML=e.trim().replace(r,""),n.appendChild(o),t&&!t.classList.contains("nt-hidden")&&t.classList.add("nt-hidden"),nt_init_listeners()}else t&&t.classList.contains("nt-hidden")&&(t.innerHTML="There was a problem with the provided selection. Refresh and try again!",t.classList.remove("nt-hidden"))}})}function nt_export_btn_click(e){for(var t=document.querySelector(".alert-danger"),n=document.querySelectorAll(".nt-cb-normal:checked"),o=[],r=0;r<n.length;r++){var c=n[r].parentElement.querySelector(".nt-post-id");o.push(parseInt(c.value))}if(o.length>0){var a="nt_export",s=_nt_export.ajax_url+"?action="+a+"&_ajax_nonce="+_nt_export.nonce+"&post_ids="+o.join(",");window.location=s,t&&!t.classList.contains("nt-hidden")&&t.classList.add("nt-hidden")}else t&&t.classList.contains("nt-hidden")&&(t.innerHTML="Select some posts first, then hit the export button.",t.classList.remove("nt-hidden"))}var _nt_export;document.onready=function(){nt_init_listeners(),document.querySelector(".nt-btn-export").addEventListener("click",nt_export_btn_click)};